- var general = site.data.general

script(type='text/javascript').
  window.mobilecheck = function() {
    var check = false;
    (function(a){
        if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;
      })(navigator.userAgent||navigator.vendor||window.opera);
    return check;
  };

// Global Site Tag (gtag.js) - Google Analytics
script(async, src="https://www.googletagmanager.com/gtag/js?id=UA-88635436-1")
script.
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());
  gtag('config', 'UA-88635436-1');
  var trackOutboundLink = function(url) {
    console.log("Outbound!");
    ga('send', 'event', 'outbound', 'click', url, {
        'transport': 'beacon',
        'hitCallback': function(){
          console.log("callback");
          document.location = url;
      }
    });
  };

script(type='text/javascript',src=url_for("vendor/jquery/jquery.min.js"))
script(type='text/javascript',src=url_for("vendor/slickNav/jquery.slicknav.min.js"))
script(type='text/javascript',src=url_for("vendor/jquery-modal/jquery.modal.js"))
script(type='text/javascript',src=url_for("vendor/slick/slick.min.js"))
script(type='text/javascript',src="https://player.vimeo.com/api/player.js")


script(type='text/javascript').
    $(document).ready(function(){
        $('.nav-mobile').slicknav({
            label: "",
            appendTo: ".header-wrap",
            closeOnClick: true
        });
    })

script(type='text/javascript').
    if ($('body').hasClass('index')) {
        var bgPlayer = false;
        var fgPlayer = false;
        var fgPlayerOptions = {
           id: 227828879,
           autoplay: false,
           title: false,
           height: 500,
           loop: false
        };
        var bgPlayerOptions = {
           id: 227859594,
           autoplay: true,
           title: false,
           loop: true
        };
        if (window.mobilecheck()) {
           var fgPlayerOptions = {
               id: 227828879,
               autoplay: false,
               title: false,
               height: 220,
               loop: false
           };
        }
        else {
           if ($("#bgPlayer").length) {
              bgPlayer = new Vimeo.Player('bgPlayer', bgPlayerOptions);
              bgPlayer.setVolume(0);
              bgPlayer.ready().then(function() {
                  bgPlayer.pause().then(bgPlayer.play());
              });
           }
        }
        $("#fgPlayer").on($.modal.BEFORE_OPEN, function(event, modal) {
           fgPlayer = new Vimeo.Player('fgPlayer', fgPlayerOptions);
           if (bgPlayer) bgPlayer.pause();
        });
        $("#fgPlayer").on($.modal.OPEN, function(event, modal) {
           if (!window.mobilecheck()) {if (fgPlayer) fgPlayer.play()};
        });
        $("#fgPlayer").on($.modal.BEFORE_CLOSE, function(event, modal) {
           if (bgPlayer) bgPlayer.play();
        });

    }

script(type="text/javascript").
    _linkedin_data_partner_id = "91636";

script(type="text/javascript").
    (function(){var s = document.getElementsByTagName("script")[0];
    var b = document.createElement("script");
    b.type = "text/javascript";b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);})();

script(type="text/javascript").
    $(".program .day-button").click(function(){
        var idx = $(".program .day-button").index(this);
        $(".program div.day").css("display", "none");
        $($(".program > .day")[idx]).css("display", "block");
    });
    $(".schedule .day-button").click(function(){
        var idx = $(".schedule .day-button").index(this);
        $(".schedule div.day").css("display", "none");
        $($(".schedule > .day")[idx]).css("display", "block");
    });

script(type="text/javascript").
    $(".module-speakers .speakers .speaker, .module-speakers .moderators .speaker").click(function(e) {
        var target = $(e.target);
        if (target.hasClass("close-button")) {
            $details = target.parent();
            $details.css("opacity", "0");
            $details.css("display", "none");
            $(this).css("cursor", "pointer");
        }
        else {
            $details = $(".details", this);
            $details.css("display", "flex");
            $details.css("opacity", "1");
            $(this).css("cursor", "auto");
        }
    });
    $(document).keyup(function(e) {
        $details = $(".module-speakers .speakers .speaker .details, .module-speakers .moderators .speaker .details");
        if (e.which == 27) {
            $details.css("opacity", "0");
            $details.css("display", "none");
            $details.parent().css("cursor", "pointer");
        }
    });

noscript
    img(height="1", width="1", style="display:none;", alt="", src="https://dc.ads.linkedin.com/collect/?pid=91636&fmt=gif")

script(type='text/javascript').
  window.mobilecheck = function() {
    var check = false;
    (function(a){
        if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;
      })(navigator.userAgent||navigator.vendor||window.opera);
    return check;
  };


script(type='text/javascript').
  window.getDict = function() {
    var search = location.search.substring(1);
    return search?JSON.parse('{"' + search.replace(/&/g, '","').replace(/=/g,'":"') + '"}',
      function(key, value) { return key===""?value:decodeURIComponent(value) }):{}
  }

// ========= Register Tracker =========
script.
  $(document).ready(function() {
    $(".site-track").attr("href", $(".site-track").attr("href") + /.*(\?.*)/.exec(window.location.href)[1]);
  });


// ========= Jumbotron Slider =========
script.
    $(document).ready(function(){
        $('.slider').slick({
            autoplay: true,
            autoplaySpeed: "#{general['slider-play-speed']}",
            dots: true,
            prevArrow: '<button type="button" class="slick-prev slick-arrow"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 41" enable-background="new 0 0 21 41"><polygon points="20.3,40.8 0,20.5 20.3,0.2 21,0.9 1.3,20.5 21,40.1 "></polygon></svg></button>',
            nextArrow: '<button type="button" class="slick-next slick-arrow"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 41" enable-background="new 0 0 21 41"><polygon points="20.3,40.8 0,20.5 20.3,0.2 21,0.9 1.3,20.5 21,40.1 "></polygon></svg></button>'
        });
    });


// ========= Countdown =========
// script.
//     var D = 'nov 09, 2018';
//     (function ($) {
//       $.fn.countdown = function(options){
//         //global variables
//         var vars = $.extend({}, $.fn.countdown.defaults, options),
//             $counter = $(this),
//             t = {day: 0, hour: 0, minute: 0, sec: 0},
//             // targetDate = new Date(vars.targetDate).getTime(),
//             // secondsLeft;
//             targetDate = new Date(D).getTime(),
//             secondsLeft;

//         //private methods
//         methods = {
//           setup: function() {
//             $.each(t, function(time, value){
//               var currentSection = '<ul id="'+time+'"><li>0</li><li>0</li></ul>';
//               $counter.append(currentSection);
//             });
//             if (vars.labels) {
//               var labelHtml = '<div class="labels"><ul><li>DAYS</li><li>HRS</li><li>MIN</li><li>SEC</li></ul></div>';
//               $counter.append(labelHtml);
//             }
//           },
//           updateTime: function(){
//             var currentTime = new Date().getTime(),
//                 secondsLeft = (targetDate - currentTime) / 1000,
//                 secsIn = {day: 86400, hour: 3600, minute: 60};
//             if (secondsLeft < 0) {secondsLeft = 0;}
//             $.each(t, function(timePeriod, value){
//               t[timePeriod] = parseInt( (secondsLeft / secsIn[timePeriod]), 10);
//               if (timePeriod !== 'sec'){
//                secondsLeft = secondsLeft % secsIn[timePeriod];
//               }
//               else {
//                 t[timePeriod] = secondsLeft;
//               }
//             });
//           },
//           updateCounter: function() {
//             $.each(t, function(period, value){
//               var section = $counter.find('#'+period).children();
//               digit = splitDigits(value);
//               section.eq(0).html(digit[0]);
//               section.eq(1).html(digit[1]);
//             });
//             function splitDigits(number) {
//               var digits = [];
//               digits[0] = Math.floor(number / 10);
//               digits[1] = Math.floor(number % 10);
//               return digits;
//             }
//           },
//           tick: function () {
//             if (secondsLeft < 1) {}
//             else {
//               methods.updateTime();
//               methods.updateCounter();
//               setTimeout(function() {methods.tick();}, 1000);
//             }
//           },

//           init: function () {
//             methods.setup();
//             methods.updateTime();
//             methods.updateCounter();
//             methods.tick();
//           },
//         };

//         //initiate countdown
//         methods.init();
//       };

//       $.fn.countdown.defaults = {
//         targetDate: D,
//         labels: true
//       };
//     }(jQuery));
//     // end of countdown plugin

//     // dom ready events (would usually be in separate js file)
//     $(document).ready(function() {
//       // arbitrarially make a new date
//       var newDate = new Date();
//       newDate.setDate(45);
//       $('.counter').countdown({targetDate: newDate});
//     });
